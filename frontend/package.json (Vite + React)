{
"name": "run-ai-5k-frontend",
"version": "0.1.0",
"private": true,
"scripts": {
"dev": "vite",
"build": "vite build",
"preview": "vite preview"
},
"dependencies": {
"react": "^18.2.0",
"react-dom": "^18.2.0",
"axios": "^1.4.0"
},
"devDependencies": {
"vite": "^5.0.0",
"tailwindcss": "^4.0.0",
"postcss": "^8.0.0",
"autoprefixer": "^10.0.0"
}
}

#/src/api.js
import axios from 'axios'


const api = axios.create({
baseURL: import.meta.env.VITE_API_BASE || 'http://localhost:8000',
timeout: 20000,
})


export async function sendMessage(message, userId = 'rido'){
const res = await api.post('/api/chat', { message, user_id: userId })
return res.data
}

#src/index.jsx
mport React from 'react'
import { createRoot } from 'react-dom/client'
import App from './App'
import './index.css'


createRoot(document.getElementById('root')).render(<App />)

#App.jsx
import React, { useState, useEffect, useRef } from 'react'
import { sendMessage } from './api'


export default function App(){
const [messages, setMessages] = useState([
{ from: 'bot', text: 'Halo! Saya RunAI, pelatih lari 5K-mu. Beri tahu saya levelmu saat ini (jalan, lari ringan, belum pernah), dan berapa hari seminggu yang bisa kamu latih.' }
])
const [input, setInput] = useState('')
const endRef = useRef(null)


useEffect(()=> endRef.current?.scrollIntoView({ behavior: 'smooth' }), [messages])


async function handleSend(){
if(!input.trim()) return
const userMsg = input.trim()
setMessages(prev => [...prev, { from:'user', text: userMsg }])
setInput('')
try{
const { reply } = await sendMessage(userMsg)
setMessages(prev => [...prev, { from:'bot', text: reply }])
}catch(err){
setMessages(prev => [...prev, { from:'bot', text: "Maaf, terjadi kesalahan. Coba lagi nanti." }])
}
}


return (
<div className="min-h-screen bg-slate-50 flex items-center justify-center p-4">
<div className="w-full max-w-2xl bg-white rounded-2xl shadow-lg p-6">
<h1 className="text-2xl font-semibold mb-4">RunAI â€” Pelatih 5K</h1>


<div className="h-80 overflow-auto border rounded-md p-4 mb-4">
{messages.map((m,i)=>(
<div key={i} className={`mb-3 flex ${m.from==='user' ? 'justify-end' : 'justify-start'}`}>
<div className={`${m.from==='user' ? 'bg-blue-600 text-white ml-4' : 'bg-gray-100 text-gray-900 mr-4'} px-4 py-2 rounded-lg max-w-[80%]`}>
{m.text}
</div>
</div>
))}
<div ref={endRef} />
</div>


<div className="flex gap-2">
<input value={input} onChange={e=>setInput(e.target.value)} onKeyDown={e=> e.key === 'Enter' && handleSend()} placeholder="Tulis pesan..." className="flex-1 border rounded-lg p-3" />
<button onClick={handleSend} className="px-4 py-2 rounded-lg bg-blue-600 text-white">Kirim</button>
</div>


</div>
</div>
)
}

#index.css
@tailwind base;
@tailwind components;
@tailwind utilities;


html, body, #root { height: 100%; }

#tailwind.config.cjs
module.exports = {
content: ['./index.html', './src/**/*.{js,jsx}'],
theme: { extend: {} },
plugins: [],
}
